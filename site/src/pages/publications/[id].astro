---
import publications from "../../data/publications.json";

/* Pour générer toutes les pages statiques */
export function getStaticPaths() {
  return publications.map(pub => ({
    params: { id: pub.id },
    props: { publication: pub }
  }));
}

const { publication } = Astro.props;
---
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>{publication.title} — TriumPortal</title>
    <link rel="stylesheet" href="/TriumPortal/styles/globals.css">
  </head>
  <body>

    <h1>{publication.title}</h1>

    <p>
      <strong>Référence :</strong> {publication.id}<br>
      <strong>Date :</strong> {publication.publishdate}<br>
      <strong>Auteurs :</strong> {publication.authors?.join(", ")}<br>
      <strong>Statut :</strong> {publication.status || "Corpus"}<br>
    </p>

    {publication.summary && (
      <section>
        <h2>Résumé</h2>
        <p>{publication.summary}</p>
      </section>
    )}

    <section>
      <h2>Document officiel</h2>
      <p>
        <a href={new URL('/pdf/ADM-AEG260207TPC.pdf', Astro.site).pathname} target="_blank">
            Télécharger le PDF
        </a>
      </p>
    </section>

    <p>
      <a href="/TriumPortal/">← Retour à l'accueil</a>
    </p>

    <footer>
      &copy; Triumvirat — {new Date().getFullYear()}
    </footer>

  </body>
</html>
